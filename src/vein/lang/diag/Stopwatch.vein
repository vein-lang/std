#ignore
#space "vein/lang/diag"

#use "vein/lang"

public class Stopwatch
{
    private TicksPerMillisecond: Int64 = 10000L;
    private TicksPerSecond: Int64 = TicksPerMillisecond * 1000L;

    private elapsed: Int64;
    private startTimeStamp: Int64;
    private isRunning: Boolean;


    public static /*readonly*/ Frequency: Int64;
    public static /*readonly*/ IsHighResolution: Boolean;

    private static /*readonly*/ tickFrequency: Float;

    public Elapsed: TimeSpan 
    {
        get 
        {
            auto s = Sys.GetElapsedDateTimeTicks();
            return new TimeSpan(s); 
        }
    }


    public Start(): Void  { } 
    public Stop(): Void  { }
    public Reset(): Void
    {
        elapsed = 0;
        isRunning = false;
        startTimeStamp = 0;
    }
    public Restart(): Void
    {
        elapsed = 0;
        startTimeStamp = this.getTimestamp();
        isRunning = true;
    }
    private getTimestamp(): Int64
    {
        if(IsHighResolution) 
        {
            auto result = Sys.queryPerformanceCounter();
            return result;
        }
        else return 0L;
    }
}